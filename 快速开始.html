<!DOCTYPE html><html><head><title>快速开始</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style></style></head><body><div id='preview-contents' class='note-content'>
                        
                    

<h2 id="快速开始">快速开始</h2>



<h3 id="引入资源">引入资源</h3>

<p>本组件依赖于百度的上传组件<strong><code>WebUploader</code></strong>，并且后端代码不支持原生java文件上传，需要在<code>SpringMVC</code>或者<code>Springboot</code>的配合下完成带进度条的<strong>断点续传</strong>功能</p>

<pre class="prettyprint hljs-dark"><code class="language-html hljs xml">  <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css/bootstrap.min.css"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css/fileinput.css"</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/css"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"/css/docs.css"</span>/&gt;</span><br><br>...<br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js/jquery.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/webuploader/webuploader.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text/javascript"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/js/cyhup.js"</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="undefined">YOUR CODE</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br></code></pre>

<h3 id="前端部分">前端部分</h3>



<h4 id="默认样式">默认样式</h4>

<p>需要对上传按钮添加id<code>filePicker</code>,以便本组件能够捕捉到上传按钮，并且添加点击事件，默认为选择文件后即上传 <br>
<strong>进度条</strong></p>

<pre class="prettyprint hljs-dark"><code class="language-html hljs xml"> <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-12 margin"</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">tabindex</span>=<span class="hljs-string">"-1"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cyh-fileName form-control"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"input-group-btn"</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"filePicker"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-lg btn-outline btn-file"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span><br>                                        <span class="hljs-attr">class</span>=<span class="hljs-string">"glyphicon glyphicon-folder-open"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> &nbsp;上传<br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fileToUpload"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">multiple</span>=<span class="hljs-string">""</span><br>                                           <span class="hljs-attr">data-preview-file-type</span>=<span class="hljs-string">"any"</span><br>                                           <span class="hljs-attr">data-upload-url</span>=<span class="hljs-string">"#"</span> <span class="hljs-attr">data-preview-file-icon</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-12 margin"</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"display-none"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress"</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progress-bar"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"progressbar"</span> <span class="hljs-attr">aria-valuenow</span>=<span class="hljs-string">"2"</span><br>                                     <span class="hljs-attr">aria-valuemin</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">aria-valuemax</span>=<span class="hljs-string">"100"</span><br>                                     <span class="hljs-attr">style</span>=<span class="hljs-string">"background-color: #563d7c; height:2em;min-width: 2em; width: 6%; display:inline;"</span>&gt;</span><br>                                    4%<br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre>

<p><strong>暂停\取消\下载按钮</strong> <br>
需要要在前两个按钮的class中分别添加<code>cyh-pause</code> <code>cyh-cancel</code>，下载按钮可以自定义</p>

<pre class="prettyprint hljs-dark"><code class="language-htmlbars hljs"><span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-12 margin"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height:55px;"</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cyh-cancel btn btn-lg btn-outline "</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin:0 auto;"</span>&gt;</span>取消<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-3"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"downloadForm"</span> <span class="hljs-attr">action</span>=<span class="hljs-string">""</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"get"</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"download"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"btn btn-lg btn-outline"</span><br>                                        <span class="hljs-attr">style</span>=<span class="hljs-string">"margin:0 auto; display:none;"</span>&gt;</span><br>                                    下载<br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-3"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"col-md-2"</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"cyh-pause btn btn-lg btn-outline"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"margin:0 auto; "</span> <span class="hljs-attr">data-bind</span>=<span class="hljs-string">"pause"</span>&gt;</span>暂停<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br></code></pre>

<h3 id="效果">效果</h3>



<p><img longdesc="./上传效果.png" alt="Alt text" title="" type="image/png" src="data:image/png;base64,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" class=""></p>



<h3 id="js实例化">js实例化</h3>

<p>组件采用了js对象作为构造函数参数以实现实例化，为了使用本组件的基本功能，至少应该提供以下参数</p>



<pre class="prettyprint hljs-dark"><code class="language-javascript hljs"> <span class="hljs-keyword">var</span> BASE_URL = <span class="hljs-string">"http://localhost:8011"</span>;<br>    <span class="hljs-keyword">var</span> UPLOAD_FUNC = <span class="hljs-string">'/upload'</span>;<br>    <span class="hljs-keyword">var</span> DOWNLOAD_FUNC = <span class="hljs-string">'/download'</span>;<br>    <span class="hljs-keyword">var</span> fileInfo = {};<br>    <span class="hljs-keyword">var</span> md5 = <span class="hljs-string">""</span>;<br>    <span class="hljs-keyword">var</span> upload = <span class="hljs-keyword">new</span> cyhup({<br>        <span class="hljs-attr">baseUrl</span>: BASE_URL,      <span class="hljs-comment">// 项目根目录</span><br>        uploadFunc: UPLOAD_FUNC, <span class="hljs-comment">//上传函数</span><br>        chunked: <span class="hljs-literal">true</span>,         <span class="hljs-comment">//是否分块,决定是否有断点续传</span><br>        beforeSendFileSkip: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{  <span class="hljs-comment">//文件ajax提交验证存在</span><br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"文件重复，已跳过"</span>);<br>        },<br>        <span class="hljs-attr">uploadProgress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file, percentage</span>) </span>{  <span class="hljs-comment">//文件上传进度</span><br>            $(<span class="hljs-string">"#progress-bar"</span>).text(<span class="hljs-built_in">Math</span>.round(percentage * <span class="hljs-number">10000</span>) / <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>)<br>                .css(<span class="hljs-string">"width"</span>, percentage * <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>);<br>        },<br>        <span class="hljs-attr">afterSendFile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) </span>{  <span class="hljs-comment">//所有分块上传完毕后调用此函数</span><br>            $(<span class="hljs-string">"#progress-bar"</span>).css(<span class="hljs-string">"width"</span>, <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>);<br>            $(<span class="hljs-string">"#progress-bar"</span>).text(<span class="hljs-string">"文件上传成功..."</span>);<br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"文件上传成功..."</span>);<br>        }<br>    });<br></code></pre>



<h3 id="后端部分">后端部分</h3>

<p>后端部分处理是否<strong>断点续传</strong>，<code>md5</code>验证，文件分块的<strong>合并</strong>，临时文件的<strong>删除</strong>等逻辑进行了封装，只需要一个函数搞定<strong>上传前，上传中，上传后</strong>的全部过程。函数会根据前端部分传入的参数进行文件上传各个阶段的判断，并进行对应的处理（参数全部使用pojo类<code>CyhParaters</code>进行了封装），并且返回值也封装到了<code>Feedback</code>中，如果想自定义返回值，可以继承<code>Feedback</code>类。确保使用了<code>SpringMVC</code> 或者<code>Springboot</code>.</p>



<pre class="prettyprint hljs-dark"><code class="language-java hljs"><span class="hljs-meta">@RequestMapping</span>(<span class="hljs-string">"/upload"</span>)<br>    <span class="hljs-meta">@ResponseBody</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> Feedback <span class="hljs-title">up</span><span class="hljs-params">(<br>            @RequestParam(value = <span class="hljs-string">"fileToUpload"</span>, required = <span class="hljs-keyword">false</span>)</span><br>                    MultipartFile file, CyhParaters cp<br>    ) <span class="hljs-keyword">throws</span> IOException, NoSuchAlgorithmException,CyhUploadException</span>{<br>        String filePath = <span class="hljs-string">"H:\\upload\\"</span>;    <span class="hljs-comment">// 文件上传后的路径</span><br>        CyhUpload upload = <span class="hljs-keyword">new</span> CyhUpload();<br>        Feedback feedback =  upload.upload(filePath,file,cp);<br>        CyhFile fileInfo =  upload.getFileInfo();<br>        <span class="hljs-keyword">if</span>(fileInfo != <span class="hljs-keyword">null</span>){<br>            System.out.println(fileInfo);<br>        }<br>       <span class="hljs-keyword">return</span>  feedback;<br>    }<br></code></pre>

<blockquote>
  <p><strong>注意：</strong>在前端配置文件上传的大小限制之后，如果<code>chunked</code>设置为<code>false</code>，即不分块上传，那么在后端必须配置对文件大小的限制，否则限制不生效或出错，<code>Springboot</code>中的配置如下</p>
</blockquote>



<pre class="prettyprint hljs-dark"><code class="language-java hljs">server.port=<span class="hljs-number">8011</span><br>spring.http.multipart.max-file-size=<span class="hljs-number">10000</span>MB<br>spring.http.multipart.max-request-size=<span class="hljs-number">10000</span>MB<br></code></pre>

<h2 id="前端参数配置">前端参数配置</h2>

<p>组件的前端部分提供了许多个性化的参数，以便实现不同的功能，需要将各项配置组合成<code>javascript</code>对象，传入组件的构造函数中，以实现实例化</p>



<h3 id="基本类型参数">基本类型参数</h3>

<ul><li><strong>baseUrl</strong>  {String}[必选]  指定项目的根目录</li>
<li><strong>uploadFunc</strong>{String}[必选] 指定上传处理函数</li>
<li><strong>chunked</strong>{Boolean}[必选]是否分块，为true则分块，且分块大小参数才会被使用，断点续传必须指定本参数为true</li>
<li><strong>fileSizeLimit</strong>{int}[可选] [默认:200m]限制文件上传的总大小</li>
<li><strong>fileSingleSizeLimit</strong>{int}[可选][默认:50m]限制单个文件上传的大小</li>
<li><strong>chunkSize</strong>{int}[可选][默认:5m]指定上传的分块大小</li>
<li><strong>accept</strong>{Object}[可选]限制文件上传的类型，参数对象中，包含extensions参数，可赋值为 ‘mp4,gif,jpg….’</li>
</ul>



<h3 id="复杂类型参数均可选">复杂类型参数(均可选)</h3>

<ul><li><strong>fileInfo</strong>: {function}[参数：Info] 文件上传前可获取文件的相关信息</li>
<li><strong>uploadError</strong>: {function}上传出错时的处理函数</li>
<li><strong>beforeSendFile</strong>: {function}所有分块上传前调用此函数</li>
<li><strong>md5Progress</strong>: {function}[参数：percentage(转码进度)]文件MD5转码的过程</li>
<li><strong>afterMd5</strong>: {function}[参数：fileMd5(文件的Md5码)]Md5完成后，可获取文件的md5码</li>
<li><strong>beforeSend</strong>: {function}每个分块上传前调用此函数</li>
<li><strong>onMerge</strong>: {function}后台正在合并时调用函数</li>
<li><strong>afterSendFile</strong>: {function}所有分块上传完毕后调用此函数</li>
<li><strong>beforeSendFileSkip</strong>: {function}文件提交验证后，文件存在</li>
<li><strong>fileQueued</strong>: {function}文件被加入上传队列后调用</li>
<li><strong>uploadProgress</strong>: {function}[参数:file,percentage]文件上传过程中的进度信息</li>
<li><strong>all</strong>: {function}[参数:type]文件上传会触发的所有事件，包括<code>beforeFileQueued</code> <code>beforeFileQueued</code>  <code>filesQueued</code> <code>fileDequeued</code> <code>reset</code> <code>startUpload</code> <code>stopUpload</code> <code>uploadStart</code> <code>uploadBeforeSend</code> <code>uploadAccept</code> <code>uploadProgress</code> <code>uploadError</code> <code>uploadSuccess</code> <code>uploadComplete</code> <code>error</code>,对于各个事件的解释详见<a href="http://fex.baidu.com/webuploader/doc/index.html#WebUploader_Uploader_events" target="_blank">http://fex.baidu.com/webuploader/doc/index.html#WebUploader_Uploader_events</a></li>
</ul>



<h3 id="一个典型的样例">一个典型的样例</h3>



<pre class="prettyprint hljs-dark"><code class="language-javascript hljs"> <span class="hljs-keyword">var</span> BASE_URL = <span class="hljs-string">"http://localhost:8011"</span>;<br>    <span class="hljs-keyword">var</span> UPLOAD_FUNC = <span class="hljs-string">'/upload'</span>;<br>    <span class="hljs-keyword">var</span> DOWNLOAD_FUNC = <span class="hljs-string">'/download'</span>;<br>    <span class="hljs-keyword">var</span> fileInfo = {};<br>    <span class="hljs-keyword">var</span> md5 = <span class="hljs-string">""</span>;<br>    <span class="hljs-keyword">var</span> upload = <span class="hljs-keyword">new</span> cyhup({<br>        <span class="hljs-attr">baseUrl</span>: BASE_URL,                     <span class="hljs-comment">// 项目根目录</span><br>        uploadFunc: UPLOAD_FUNC,                                 <span class="hljs-comment">//上传函数</span><br>        fileSizeLimit: <span class="hljs-number">2000</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,                     <span class="hljs-comment">//文件总大小</span><br>        fileSingleSizeLimit: <span class="hljs-number">4</span> * <span class="hljs-number">500</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,            <span class="hljs-comment">//文件单个大小</span><br>        chunked: <span class="hljs-literal">false</span>,                                        <span class="hljs-comment">//是否分块</span><br>        chunkSize: <span class="hljs-number">5</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>,                            <span class="hljs-comment">//分块大小</span><br>        <span class="hljs-comment">//accept:{</span><br>        <span class="hljs-comment">//    extensions: 'mp4,gif,jpg,jpeg,bmp,png'           //允许上传的文件后缀名</span><br>        <span class="hljs-comment">//},</span><br>        fileInfo: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">Info</span>) </span>{<br>            fileInfo = Info;<br>            $(<span class="hljs-string">"#fileName"</span>).text(Info.fileName);<br>            $(<span class="hljs-string">"#fileSize"</span>).text(Info.fileSize + <span class="hljs-string">" Bytes"</span>);<br>            $(<span class="hljs-string">"#fileType"</span>).text(Info.contentType);<br>        },<br>        <span class="hljs-attr">uploadError</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{                           <span class="hljs-comment">//上传出错</span><br>            alert(<span class="hljs-string">"上传失败！ 请重试！"</span>);<br>        },<br>        <span class="hljs-attr">beforeSendFile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) </span>{                       <span class="hljs-comment">//所有分块上传前调用此函数</span><br>            $(<span class="hljs-string">'#progress'</span>).fadeIn(<span class="hljs-number">1000</span>);                   <span class="hljs-comment">//进度条显示</span><br>            $(<span class="hljs-string">".cyh-fileName"</span>).text(file.name);<br>        },<br>        <span class="hljs-attr">md5Progress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">percentage</span>) </span>{                <span class="hljs-comment">//文件MD5转码的过程</span><br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"正在读取文件信息..."</span>);<br>        },<br>        <span class="hljs-attr">afterMd5</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">fileMd5</span>) </span>{                            <span class="hljs-comment">//Md5完成后</span><br>            md5 = fileMd5;<br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"成功获取文件信息..."</span>);<br>        },<br>        <span class="hljs-attr">beforeSend</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{                          <span class="hljs-comment">//每个分块上传前调用此函数</span><br><br>        },<br>        <span class="hljs-attr">onMerge</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{                                <span class="hljs-comment">//正在合并</span><br>            $(<span class="hljs-string">"#progress-bar"</span>).text(<span class="hljs-string">"合并中..."</span>);<br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"合并中..."</span>);<br>        },<br>        <span class="hljs-attr">afterSendFile</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) </span>{                      <span class="hljs-comment">//所有分块上传完毕后调用此函数</span><br>            $(<span class="hljs-string">"#progress-bar"</span>).css(<span class="hljs-string">"width"</span>, <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>);<br>            $(<span class="hljs-string">"#progress-bar"</span>).text(<span class="hljs-string">"文件上传成功..."</span>);<br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"文件上传成功..."</span>);<br>            $(<span class="hljs-string">"#progress"</span>).fadeOut(<span class="hljs-number">3000</span>);         <span class="hljs-comment">//动画 变透明</span><br>            $(<span class="hljs-string">"#download"</span>).fadeIn(<span class="hljs-number">2000</span>);<br>            $(<span class="hljs-string">"#downloadForm"</span>).attr(<span class="hljs-string">"action"</span>, BASE_URL + DOWNLOAD_FUNC + <span class="hljs-string">"/"</span> + fileInfo.extensionName + <span class="hljs-string">"/"</span> + md5);<br>            <span class="hljs-comment">// $("#progress-bar").css("width", 100 + '%');</span><br>        },<br>        <span class="hljs-attr">beforeSendFileSkip</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">res</span>) </span>{            <span class="hljs-comment">//文件ajax提交验证存在</span><br>            $(<span class="hljs-string">'#item1'</span>).find(<span class="hljs-string">"p.state"</span>).text(<span class="hljs-string">"文件重复，已跳过"</span>);<br>        },<br>        <span class="hljs-attr">fileQueued</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file</span>) </span>{                        <span class="hljs-comment">//文件加入队列</span><br><br>        },<br>        <span class="hljs-attr">uploadProgress</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">file, percentage</span>) </span>{          <span class="hljs-comment">//文件上传进度</span><br>            $(<span class="hljs-string">"#progress-bar"</span>).text(<span class="hljs-built_in">Math</span>.round(percentage * <span class="hljs-number">10000</span>) / <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>).css(<span class="hljs-string">"width"</span>, percentage * <span class="hljs-number">100</span> + <span class="hljs-string">'%'</span>);<br>        },<br><br>        <span class="hljs-attr">all</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">type</span>) </span>{                           <span class="hljs-comment">//上传过程中所有的触发类型</span><br>            <span class="hljs-built_in">console</span>.log(type);<br>            <span class="hljs-keyword">if</span> (type == <span class="hljs-string">"error"</span>) {<br>                alert(<span class="hljs-string">"上传失败！"</span>);<br>            }<br>        }<br>    });<br></code></pre></div></body></html>